"use strict";const ifSelectorExist=(e="",t=(()=>{}),s=!0)=>{if($(e).length)return t();s&&IF_SELECTOR_EXIST_DEBUG_MODE&&console.warn(`Selector ${e} does not exist.`)};ifSelectorExist("[data-mask]",()=>$("[data-mask]").inputmask()),bsCustomFileInput.init();const isEmptyOrNull=e=>""===$.trim(e)||null==e,nullOrReturnValue=(e,t)=>isEmptyOrNull(e)?null:t,initDataTable=(e="",t={debugMode:!1,enableButtons:!1,url:"",columns:[]})=>$(()=>ifSelectorExist(e,()=>{const s={url:t.url,headers:AJAX_HEADERS,dataSrc:""},r={emptyTable:'\n        <div class="text-center p-5">\n            <h3>No records yet</h3>\n            <div class="text-secondary">Hey! We found no records here yet.</div>\n        </div>\n    ',loadingRecords:'\n        <div class="text-center py-5 wait">\n            <div class="spinner-border text-primary mb-3" role="status">\n                <span class="sr-only">Loading ...</span>\n            </div>\n            <div class="text-secondary">Making it ready ...</div>\n        </div>\n    ',processing:'\n        <div class="text-center p-5 wait">\n            <div class="spinner-border text-primary mb-3" role="status">\n                <span class="sr-only">Loading ...</span>\n            </div>\n            <div class="text-secondary">Processing, please wait ...</div>\n        </div>\n    ',zeroRecords:'\n        <div class="text-center p-5">\n            <h3>No match found</h3>\n            <div class="text-secondary">No records was found that matched to your request. Please check if the spelling is correct or try other keywords.</div>\n        </div>\n    ',paginate:{previous:'<i class="fas fa-caret-left"></i>',next:'<i class="fas fa-caret-right"></i>'}},a=[{targets:[-1],orderable:!1}],n=[[0,"desc"]];let o=[],i=[];for(var l=1;l<t.columns.length-1;l++)o.push(l),l>=2&&i.push(l);var c;c=t.debugMode?{ajax:{url:t.url,headers:AJAX_HEADERS,success:e=>console.log(e)}}:t.enableButtons?{ajax:s,columns:t.columns,order:n,dom:'\n\t\t\t<"row w-100"\n\t\t\t\t<"col-md-2" l>\n\t\t\t\t<"col-md-6" B>\n\t\t\t\t<"col-md-4" f>\n\t\t\t>\n\t\t\t<t>\n\t\t\t<"row"\n\t\t\t\t<"col-md-6" i>\n\t\t\t\t<"col-md-6" p>\n\t\t\t>\n\t\t',responsive:!0,autoWidth:!1,buttons:[{extend:"copy",text:TEMPLATE.LABEL_ICON("Copy","copy"),className:"btn-sm btn-default",exportOptions:{columns:o}},{extend:"csv",text:TEMPLATE.LABEL_ICON("CSV","file-csv"),className:"btn-sm btn-default",exportOptions:{columns:o}},{extend:"excel",text:TEMPLATE.LABEL_ICON("Excel","file-excel"),className:"btn-sm btn-default",exportOptions:{columns:o}},{extend:"pdf",text:TEMPLATE.LABEL_ICON("PDF","file-pdf"),className:"btn-sm btn-default",exportOptions:{columns:o}},{extend:"print",text:TEMPLATE.LABEL_ICON("Print","print"),className:"btn-sm btn-default",exportOptions:{columns:o}},{extend:"colvis",text:TEMPLATE.LABEL_ICON("Columns","eye"),className:"btn-sm btn-default",columns:i}],columnDefs:a,language:r}:{ajax:s,columns:t.columns,order:n,responsive:!0,columnDefs:a,language:r},$(e).DataTable(c)})),reloadDataTable=e=>ifSelectorExist(e,()=>$(e).DataTable().ajax.reload());jQuery.validator.addMethod("lessThan",function(e,t,s){if($(s).length){const t=getValue(s);return!!isEmptyOrNull(t)||parseFloat(e)<parseFloat(t)}return!0},"It must be less than something"),jQuery.validator.addMethod("greaterThan",function(e,t,s){if($(s).length){const t=getValue(s);return!!isEmptyOrNull(t)||parseFloat(e)>parseFloat(t)}return!0},"It must be greater than something"),jQuery.validator.addMethod("lessThanOrEqualTo",function(e,t,s){if($(s).length){const t=getValue(s);if(!isEmptyOrNull(t)&&0!=t)return parseFloat(e)<=parseFloat(t)}return!0},"It must be less than or equal to something"),jQuery.validator.addMethod("greaterThan",function(e,t,s){if($(s).length){const t=getValue(s);if(!isEmptyOrNull(t)&&0!=t)return parseFloat(e)>=parseFloat(t)}return!0},"It must be greater than or equal to something"),jQuery.validator.addMethod("beforeToday",function(e,t,s){return this.optional(t)||isBeforeToday(e)},"Date and Time must be before today"),jQuery.validator.addMethod("afterToday",function(e,t,s){return this.optional(t)||isAfterToday(e)},"Date and Time must be before today"),jQuery.validator.addMethod("beforeTime",function(e,t,s){if($(s).length){const t=getValue(s);return!!isEmptyOrNull(t)||moment(e,"H:mm").isBefore(moment(t,"H:mm"))}return!0}),jQuery.validator.addMethod("afterTime",function(e,t,s){if($(s).length){const t=getValue(s);return!!isEmptyOrNull(t)||moment(e,"H:mm").isAfter(moment(t,"H:mm"))}return!0}),jQuery.validator.addMethod("beforeDateTime",function(e,t,s){if($(s).length){const t=getValue(s);return!!isEmptyOrNull(t)||moment(e,"YYYY-MM-DD HH:mm:ss").isBefore(moment(t,"YYYY-MM-DD HH:mm:ss"))}return!0}),jQuery.validator.addMethod("afterDateTime",function(e,t,s){if($(s).length){const t=getValue(s);return!!isEmptyOrNull(t)||moment(e,"YYYY-MM-DD HH:mm:ss").isAfter(moment(t,"YYYY-MM-DD HH:mm:ss"))}return!0});const validateForm=(e="",t={rules:{},messages:{},submitHandler:()=>{}})=>{ifSelectorExist(e,()=>{$(e).validate({rules:t.rules,messages:t.messages,errorElement:"div",errorPlacement:(e,t)=>{e.addClass("invalid-feedback"),t.closest(".form-group").append(e)},highlight:e=>$(e).addClass("is-invalid"),unhighlight:e=>$(e).removeClass("is-invalid"),submitHandler:t.submitHandler})},!1)},resetForm=e=>ifSelectorExist(e,()=>$(e).trigger("reset")),generateFormData=e=>new FormData($(e)[0]),fromNow=e=>moment(e).fromNow(),toNow=e=>moment(e).fromNow(),isBeforeToday=e=>moment(e).isBefore(moment()),isAfterToday=e=>moment(e).isAfter(moment()),formatDateTime=(e,t="")=>isEmptyOrNull(t)?moment(e).format():moment(e).format(t in DATETIME_FORMATS?DATETIME_FORMATS[t]:t),showModal=e=>ifSelectorExist(e,()=>$(e).modal("show")),hideModal=e=>ifSelectorExist(e,()=>$(e).modal("hide")),onHideModal=(e,t=(()=>{}))=>{ifSelectorExist(e,()=>$(e).on("hide.bs.modal",()=>t()))},onShowModal=(e,t=(()=>{}))=>{ifSelectorExist(e,()=>$(e).on("show.bs.modal",()=>t()))},setContent=(e,t)=>{"string"==typeof e?ifSelectorExist(e,()=>{$(e).html(t)}):"object"==typeof e?Object.keys(e).forEach(t=>ifSelectorExist(t,()=>$(t).html(e[t]))):console.error("[Error]: setContent error param type")},setValue=(e,t)=>{"string"==typeof e?ifSelectorExist(e,()=>$(e).val(t)):"object"==typeof e?Object.keys(e).forEach(t=>ifSelectorExist(t,()=>$(t).val(e[t]))):console.error("[Error]: setValue error param type")},getValue=e=>ifSelectorExist(e,()=>$(e).val()),enableElement=e=>ifSelectorExist(e,()=>$(e).prop("disabled",!1)),disableElement=e=>ifSelectorExist(e,()=>$(e).prop("disabled",!0)),enableOrDisableElement=(e,t)=>ifSelectorExist(e,()=>{t?$(e).prop("disabled",!0):$(e).prop("disabled",!1)}),checkElement=e=>ifSelectorExist(e,()=>$(e).prop("checked",!0)),uncheckElement=e=>ifSelectorExist(e,()=>$(e).prop("checked",!1)),checkOrUncheckElement=(e,t)=>ifSelectorExist(e,()=>{t?$(e).prop("checked",!0):$(e).prop("checked",!1)}),showElement=e=>ifSelectorExist(e,()=>$(e).show()),hideElement=e=>ifSelectorExist(e,()=>$(e).hide()),showOrHideElement=(e,t)=>ifSelectorExist(e,()=>t?$(e).show():$(e).hide()),onEvent=(e,t,s=(()=>{}))=>ifSelectorExist(e,()=>$(e).on(t,()=>s())),onClick=(e,t=(()=>{}))=>onEvent(e,"click",()=>t()),onChange=(e,t=(()=>{}))=>onEvent(e,"change",()=>t()),isChecked=e=>ifSelectorExist(e,()=>$(e).is(":checked")),formatName=(e="",t={firstName:"",middleName:"",lastName:"",suffixName:""})=>{const s=$.trim(t.firstName),r=$.trim(t.lastName);let a=$.trim(t.middleName),n=$.trim(t.suffixName);const o=isEmptyOrNull(a)?"":` ${a.charAt(0)}.`;a=isEmptyOrNull(a)?"":` ${a}`,n=isEmptyOrNull(n)?"":`, ${n}`;const i={"L, F M., S":r+", "+s+o+n,"F M. L, S":s+o+" "+r+n};return e in i?i[e]:()=>(console.error(`Format "${e}" for name is invalid`),"")},formatNumber=e=>new Intl.NumberFormat("en-US").format(e),formatCurrency=e=>new Intl.NumberFormat("fil-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),btnToLoadingState=e=>{disableElement(e),setContent(e,'<div class="spinner-border spinner-border-sm mx-3">')},btnToUnloadState=(e,t)=>{enableElement(e),setContent(e,t)},GET_ajax=(e="",t={success:()=>{},error:()=>console.error("GET_ajax failed")})=>{$.ajax({url:e,type:"GET",headers:AJAX_HEADERS,success:t.success,error:t.error}).fail(t.error)},POST_ajax=(e="",t={},s={success:()=>{},error:()=>console.error("POST_ajax failed")})=>{$.ajax({url:e,type:"POST",headers:AJAX_HEADERS,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(t),success:s.success,error:s.error}).fail(s.error)},PUT_ajax=(e="",t={},s={success:()=>{},error:()=>console.error("PUT_ajax failed")})=>{$.ajax({url:e,type:"PUT",headers:AJAX_HEADERS,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(t),success:s.success,error:s.error}).fail(s.error)},DELETE_ajax=(e="",t={success:()=>{},error:()=>console.error("DELETE_ajax failed")})=>{$.ajax({url:e,type:"DELETE",headers:AJAX_HEADERS,success:t.success,error:t.error}).fail(t.error)};$(()=>{if(localStorage.getItem("sessioned_alert")){const e=localStorage.getItem("sessioned_alert_theme"),t=localStorage.getItem("sessioned_alert_message"),s={success:()=>toastr.success(t),info:()=>toastr.info(t),warning:()=>toastr.warning(t),error:()=>toastr.error(t)};setTimeout(()=>s[e](),500);const r=["sessioned_alert","sessioned_alert_theme","sessioned_alert_message"];setTimeout(()=>r.forEach(e=>localStorage.removeItem(e)),500)}});const setSessionedAlertAndRedirect=(e={theme:"",message:"",redirectURL:""})=>{localStorage.setItem("sessioned_alert",!0),localStorage.setItem("sessioned_alert_theme",e.theme),localStorage.setItem("sessioned_alert_message",e.message),location.assign(e.redirectURL)},setTimeline=(e,t={title:"",timelineData:[]})=>{ifSelectorExist(e,()=>{const s=t.timelineData;let r="";const a=(e={icon:"",iconTheme:"",dateTime:"",timelineTitle:"",timelineBody:""})=>`\n\t\t\t\t<div>\n\t\t\t\t\t<i class="fas fa-${e.icon} bg-${e.iconTheme}"></i>\n\t\t\t\t\t<div class="timeline-item">\n\t\t\t\t\t\t<div class="time">\n\t\t\t\t\t\t\t${TEMPLATE.ICON_LABEL("clock",fromNow(e.dateTime))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="timeline-header">${e.timelineTitle}</div>\n\t\t\t\t\t\t<div class="timeline-body">${e.timelineBody}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;s.forEach(e=>{r=a({icon:e.icon,iconTheme:e.iconTheme,dateTime:e.dateTime,timelineTitle:e.timelineTitle,timelineBody:e.timelineBody})+r}),setContent(e,`\n        <div class="timeline">\n            <div class="time-label">\n                <span class="bg-primary shadow-sm">${t.title}</span>\n            </div>\n            ${r}\n            <div><i class="fas fa-clock bg-secondary"></i></div>\n        </div>\n    `)})},getURLQueryObj=()=>{const e=window.location.search,t=""===e?null:e.replace("?","").split("&");let s={};return t&&t.forEach(e=>{const t=e.split("=");s[t[0]]=t[1]}),s},getURLQueryString=(e={})=>{let t=[];Object.entries(e).forEach(([e,s])=>{isEmptyOrNull(s)||t.push(e+"="+s)});let s="";return t.forEach((e,t)=>{s+=0===t?"?":"&",s+=e}),s},setPagination=(e,t={query:"",totalRows:0,currentPage:0})=>{const s=parseInt(t.totalRows),r=parseInt(t.currentPage),a=e=>{let t=getURLQueryObj();return t.page=e,window.location.href.split("?")[0]+getURLQueryString(t)},n=Math.ceil(s/FETCH_ROWS);let o="";const i=e=>{o+=e==r?`\n\t\t\t\t<div class="page-item active">\n\t\t\t\t\t<div class="page-link">${e}</div>\n\t\t\t\t</div>\n\t\t\t`:`\n\t\t\t\t<div class="page-item">\n\t\t\t\t\t<a class="page-link" href="${a(e)}">${e}</a>\n\t\t\t\t</div>\n\t\t\t`},l=()=>o+='\n        <div class="page-item disabled">\n            <div class="page-link">\n                <i class="fas fa-ellipsis-h"></i>\n            </div>\n        </div>\n    ';if(o+=`\n        <div class="page-item${1==r?" disabled":""}">\n            <a class="page-link" href="${a(r-1)}">\n                <i class="fas fa-caret-left"></i>\n            </a>\n        </div>\n    `,r>3&&n>5&&(i(1),l()),r<3)for(let e=1;e<=5&&e<=n;e++)i(e);else if(r<=n-2)for(let e=r-2;e<=r+2&&e<=n;e++)i(e);else if(n>5)for(let e=n-4;e<=n;e++)i(e);else for(let e=1;e<=n;e++)i(e);r<n-2&&n>5&&(l(),i(n)),o+=`\n        <div class="page-item${r==n?" disabled":""}">\n            <a class="page-link" href="${a(r+1)}">\n                <i class="fas fa-caret-right"></i>\n            </a>\n        </div>\n    `,r>0&&r<=n&&setContent(e,o)},printContent=(e,t)=>{const s=window.open();s.document.write(TEMPLATE.PRINT(e,t)),s.document.close(),s.print(),s.onafterprint=(()=>s.close())},pluralize=(e,t)=>t>1||0===t?e+"s":e,daysLabels=(e,t)=>{let s=[],r=e.startOf("day");for(;r.diff(t.endOf("day"))<=0;)s.push(r.format()),r=r.add(1,"days");return s};